var gdclw_widgets;!function(a,t,c,n){(gdclw_widgets={s:"",nonce:"",page:1,init:function(){a(c).on("change",".gdclw-auto-save",function(){gdclw_widgets.save(a(this))}),a(c).on("click",".gdclw-post-search-result",function(){var t=a(this).data("post"),c=a(this).find(".item-title").html(),n=a(this).closest(".d4plib-tab-content").find(".gdclw-post-info");a(".widefat",n).val(t),a(".cell-right span",n).html(c)}),a(c).on("keyup keydown click",".gdclw-post-search .widefat",function(){var t=a(this).val();t!==gdclw_widgets.s&&(gdclw_widgets.s=t,gdclw_widgets.nonce=a(this).data("nonce"),gdclw_widgets.query(a(this).closest("table").find(".gdclw-post-search-results")))}),a(c).on("click",".gdclw-term a",function(t){t.preventDefault(),a(this).closest(".gdclw-term-single").remove()}),a(c).on("click",".gdclw-operator",function(){var t=a(this).html(),c=a(this).prev(),n=c.attr("name");n="+"===t?(a(this).html("-"),n.replace("[in]","[out]")):(a(this).html("+"),n.replace("[out]","[in]")),c.attr("name",n)}),a(c).on("click",".gdclw-author-search .widefat:not(.gdclw-search-on)",function(){var t=a(this);t.addClass("gdclw-search-on"),t.suggest(ajaxurl+"?action=gdclw_author_search",{multiple:!1,onSelect:function(){t.next().click()}})}),a(c).on("click",".gdclw-term-search .widefat:not(.gdclw-search-on)",function(){var t=a(this),c=t.data("tax");t.addClass("gdclw-search-on"),t.suggest(ajaxurl+"?action=ajax-tag-search&tax="+c,{multiple:!1,onSelect:function(){t.next().click()}})}),a(c).on("click",".gdclw-author-search .button-secondary, .gdclw-term-search .button-secondary",function(){var t=a(this).prev().val();if(""!==t){var c=a(this).parent().next().clone();c.find("input").val(t),c.find(".gdclw-term span").html(t),c.show(),a(this).closest("table").find(".gdclw-term-list").append(c)}})},query:function(c){var n,e,t={action:"wp-link-ajax",page:gdclw_widgets.page,_ajax_linking_nonce:gdclw_widgets.nonce};""!==gdclw_widgets.s&&(t.search=gdclw_widgets.s),a.post(ajaxurl,t,function(t){for(a(c).html(""),n=0;n<t.length;n++)e='<div class="gdclw-post-search-result" data-post="'+t[n].ID+'">',e+='<span class="item-title">'+t[n].title+'</span><span class="item-info">'+t[n].info+"</span>",e+="</div>",a(c).append(e)},"json")},save:function(t){t.closest("form").find(".widget-control-actions input.button").click()}}).init()}(jQuery,window,document);